<!DOCTYPE html>
<html lang="en">
<head>
 <meta name="monetag" content="a2938f91c27f9fd29c59e27c1b75b5ea">
<meta charset="UTF-8">
<title>Ads Earning Platform</title>

<style>
body{margin:0;background:#0f172a;color:#fff;font-family:Arial}
input,button,textarea{
 width:100%;padding:12px;margin:6px 0;
 border-radius:8px;border:none
}
button{background:#22c55e;font-weight:bold;cursor:pointer}
.hidden{display:none}
.card{background:#020617;padding:20px;border-radius:14px;margin:12px}
.ad-box{border:1px solid #334155;padding:12px;border-radius:10px;margin-top:10px}
.small{font-size:13px;color:#94a3b8}
.icon-btn{
 background:#1e293b;
 display:flex;
 align-items:center;
 justify-content:center;
 gap:8px;
}
</style>
</head>

<body>

<!-- AUTH BOX -->
<div id="authBox" class="card">
<h2>Signup</h2>
<input id="suEmail" placeholder="Email">
<input id="suPass" type="password" placeholder="Password (min 6)">
<input id="suRef" placeholder="Referral Code (optional)">
<p class="small">Referral bonus: â‚¹5</p>
<button onclick="signup()">Signup</button>

<hr>

<h2>Login</h2>
<input id="liEmail" placeholder="Email">
<input id="liPass" type="password" placeholder="Password">
<button onclick="login()">Login</button>
</div>

<!-- USER PANEL -->
<div id="userPanel" class="card hidden">
<h2>User Dashboard</h2>

<p>Wallet: â‚¹<span id="wallet">0.00</span></p>
<p>Valid Ad Clicks: <span id="clicks">0</span></p>
<p class="small">â‚¹7 CPM | Minimum Withdraw â‚¹149</p>

<h3>Ads</h3>
<div id="ads"></div>

<button onclick="withdraw()">Withdraw</button>

<h3>Referral</h3>
<button class="icon-btn" onclick="showReferral()">ðŸ”— Get Referral Link</button>
<input id="refLink" class="hidden" readonly>
<p class="small">Referral earning coming soon (â‚¹5)</p>

<button onclick="logout()">Logout</button>
</div>

<!-- ADMIN PANEL -->
<div id="adminPanel" class="card hidden">
<h2>Admin Panel</h2>

<h3>Ad Unit Code</h3>
<textarea id="adCode" rows="5" placeholder="Paste ad HTML / iframe / script"></textarea>
<button onclick="saveAd()">Save Ad</button>
<button onclick="removeAd()" style="background:#dc2626">Remove Ad</button>

<h3>Live Ad Code</h3>
<pre id="liveAd" class="small"></pre>

<h3>Analytics</h3>
<p>Total Users: <span id="aUsers">0</span></p>
<p>Total Ad Clicks: <span id="aClicks">0</span></p>
<p>Total Wallet: â‚¹<span id="aWallet">0</span></p>

<button onclick="logout()">Logout</button>
</div>

<hr>

<!-- ADMIN LOGIN -->
<div class="card">
<h3>Admin Login</h3>
<input id="adminPass" type="password" placeholder="Admin Password">
<button onclick="adminLogin()">Admin Login</button>
</div>

<!-- FIREBASE -->
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/12.8.0/firebase-app.js";
import {
 getAuth,
 createUserWithEmailAndPassword,
 signInWithEmailAndPassword,
 signOut,
 onAuthStateChanged
} from "https://www.gstatic.com/firebasejs/12.8.0/firebase-auth.js";
import {
 getDatabase,
 ref,
 set,
 get,
 update
} from "https://www.gstatic.com/firebasejs/12.8.0/firebase-database.js";

/* FIREBASE CONFIG */
const firebaseConfig = {
 apiKey: "AIzaSyBlL5B1qto1kwqqZCPwzWxjumHdbyQUnDU",
 authDomain: "earn-cash-77c4b.firebaseapp.com",
 databaseURL: "https://earn-cash-77c4b-default-rtdb.firebaseio.com",
 projectId: "earn-cash-77c4b",
 storageBucket: "earn-cash-77c4b.firebasestorage.app",
 messagingSenderId: "907121665621",
 appId: "1:907121665621:web:568b2e45b9dbaf04a2d6dc"
};

const app = initializeApp(firebaseConfig);
const firebaseAuth = getAuth(app);
const db = getDatabase(app);

/* ELEMENTS */
const authBox = document.getElementById("authBox");
const userPanel = document.getElementById("userPanel");
const adminPanel = document.getElementById("adminPanel");

let isAdmin = false;

/* AUTH */
window.signup = async()=>{
 try{
  const email = suEmail.value.trim();
  const pass = suPass.value;
  if(pass.length < 6) return alert("Password minimum 6 characters");
  const cred = await createUserWithEmailAndPassword(firebaseAuth,email,pass);
  await set(ref(db,"users/"+cred.user.uid),{
   wallet:0,
   clicks:0,
   lastClick:0,
   ref:suRef.value||""
  });
  alert("Signup successful");
 }catch(e){ alert(e.message); }
};

window.login = async()=>{
 try{
  await signInWithEmailAndPassword(firebaseAuth,liEmail.value,liPass.value);
 }catch(e){ alert(e.message); }
};

window.logout = ()=>{
 isAdmin = false;
 signOut(firebaseAuth);
};

/* ADMIN LOGIN */
window.adminLogin = ()=>{
 if(adminPass.value === "912268rs"){
  isAdmin = true;
  authBox.classList.add("hidden");
  userPanel.classList.add("hidden");
  adminPanel.classList.remove("hidden");
  loadAdmin();
 }else alert("Wrong admin password");
};

/* ADMIN ADS */
window.saveAd = async()=>{
 await set(ref(db,"settings/adCode"),adCode.value);
 loadAdmin();
};

window.removeAd = async()=>{
 await set(ref(db,"settings/adCode"),"");
 loadAdmin();
};

async function loadAdmin(){
 const ad = await get(ref(db,"settings/adCode"));
 liveAd.innerText = ad.exists() ? ad.val() : "No ad set";

 const users = await get(ref(db,"users"));
 let u=0,c=0,w=0;
 if(users.exists()){
  Object.values(users.val()).forEach(x=>{
   u++; c+=x.clicks; w+=x.wallet;
  });
 }
 aUsers.innerText=u;
 aClicks.innerText=c;
 aWallet.innerText=w.toFixed(2);
}

/* USER ADS */
async function loadUserAds(uid){
 const ad = await get(ref(db,"settings/adCode"));
 ads.innerHTML="";
 if(!ad.exists() || !ad.val()) return;
 const box = document.createElement("div");
 box.className="ad-box";
 box.innerHTML = ad.val();
 box.onclick = ()=>adClick(uid);
 ads.appendChild(box);
}

async function adClick(uid){
 const uref = ref(db,"users/"+uid);
 const snap = await get(uref);
 if(!snap.exists()) return;
 const now = Date.now();
 if(now - snap.val().lastClick < 10000)
  return alert("Please wait before next valid click");

 const clicksNew = snap.val().clicks + 1;
 const walletNew = (clicksNew/1000)*7;

 await update(uref,{
  clicks:clicksNew,
  wallet:walletNew,
  lastClick:now
 });

 clicks.innerText = clicksNew;
 wallet.innerText = walletNew.toFixed(2);
}

/* REFERRAL */
window.showReferral = ()=>{
 refLink.classList.remove("hidden");
 refLink.value = location.origin+"?ref="+firebaseAuth.currentUser.uid;
};

/* WITHDRAW */
window.withdraw = ()=>{
 if(parseFloat(wallet.innerText) < 149)
  alert("Minimum withdrawal â‚¹149");
 else
  alert("Withdrawal system coming soon");
};

/* AUTH STATE */
onAuthStateChanged(firebaseAuth, async(user)=>{
 if(isAdmin) return;
 if(user){
  authBox.classList.add("hidden");
  adminPanel.classList.add("hidden");
  userPanel.classList.remove("hidden");

  const snap = await get(ref(db,"users/"+user.uid));
  if(snap.exists()){
   wallet.innerText = snap.val().wallet.toFixed(2);
   clicks.innerText = snap.val().clicks;
  }
  loadUserAds(user.uid);
 }else{
  authBox.classList.remove("hidden");
  userPanel.classList.add("hidden");
  adminPanel.classList.add("hidden");
 }
});
</script>

</body>
</html>
